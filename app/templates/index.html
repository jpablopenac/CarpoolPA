{% extends 'base.html' %}
{% block content %}
<h2>Horario</h2>
<p>Semana actual: {{ cur_week.start_date }}</p>
<p>Próxima semana: {{ next_week.start_date }}</p>

<div class="row">
  <div class="col-12 col-lg-6">
    <h4>Ida</h4>
    <table class="table table-sm">
      <thead><tr><th>Día</th>{% for s in ida %}<th>{{ s }}</th>{% endfor %}</tr></thead>
      <tbody>
        {% for d in days %}
          <tr>
            <td>{{ d|capitalize }}</td>
            {% for s in ida %}
              <td>
                {% for label in grid_cur_ida[d][s] %}
                  <div>{{ label }}</div>
                {% endfor %}
              </td>
            {% endfor %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="col-12 col-lg-6">
    <h4>Vuelta</h4>
    <table class="table table-sm">
      <thead><tr><th>Día</th>{% for s in vuelta %}<th>{{ s }}</th>{% endfor %}</tr></thead>
      <tbody>
        {% for d in days %}
          <tr>
            <td>{{ d|capitalize }}</td>
            {% for s in vuelta %}
              <td>
                {% for label in grid_cur_vuelta[d][s] %}
                  <div>{{ label }}</div>
                {% endfor %}
              </td>
            {% endfor %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% if current_user.is_admin %}
  <div class="mt-3">
    <a class="btn btn-outline-primary" href="/optimize/current">Optimizar semana actual</a>
    <a class="btn btn-outline-secondary" href="/optimize/next">Optimizar próxima semana</a>
  </div>
{% endif %}

<hr>
<h3>Próxima semana</h3>
<div class="row">
  <div class="col-12 col-lg-6">
    <h4>Ida</h4>
    <table class="table table-sm">
      <thead><tr><th>Día</th>{% for s in ida %}<th>{{ s }}</th>{% endfor %}</tr></thead>
      <tbody>
        {% for d in days %}
          <tr>
            <td>{{ d|capitalize }}</td>
            {% for s in ida %}
              <td>
                {% for label in grid_next_ida[d][s] %}
                  <div>{{ label }}</div>
                {% endfor %}
              </td>
            {% endfor %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="col-12 col-lg-6">
    <h4>Vuelta</h4>
    <table class="table table-sm">
      <thead><tr><th>Día</th>{% for s in vuelta %}<th>{{ s }}</th>{% endfor %}</tr></thead>
      <tbody>
        {% for d in days %}
          <tr>
            <td>{{ d|capitalize }}</td>
            {% for s in vuelta %}
              <td>
                {% for label in grid_next_vuelta[d][s] %}
                  <div>{{ label }}</div>
                {% endfor %}
              </td>
            {% endfor %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  </div>
{% endblock %}
